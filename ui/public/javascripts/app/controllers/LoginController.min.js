vulpe.ng.app.controller("LoginController",["$rootScope","$scope","VulpeJS",function(a,c,b){var d=new b().init(c);d.item={username:"",password:"",rememberMe:false};d.$authenticator.logout();if(d.$store.get("remember")){d.item=d.$store.get("remember")}else{if(d.$cookies.remember){d.item=JSON.parse(d.$cookies.remember.substring(2));d.item.rememberMe=true}}d.auth.login=function(){if(c.form.$valid){d.message.clean();if(d.item.rememberMe){d.$store.set("remember",d.item)}else{d.$store.remove("remember")}d.http.post({url:vulpe.ng.rootContext+"/login",data:d.item,callback:{success:function(e){d.message.success("Successfully logged in!");d.$authenticator.login(e.user);d.redirect(e.redirectTo)},error:function(g,e,h,f){if(e===401||e===403){d.message.error("Informed credential is invalid.")}else{d.message.error("An error occurred in the execution.")}}}})}else{$(!d.item.username?"#login-username":"#login-password").focus()}};d.auth.password={forgot:function(){if(d.item.username&&d.item.username.length>0){d.redirect(vulpe.ng.rootContext+"/forgot-password/"+d.item.username)}else{d.message.error("Please enter your e-mail password reset.");$("#login-username").focus()}}};d.on.ready(function(){$("#login").addClass("active")})}]);